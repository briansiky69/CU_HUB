{% extends 'base.html' %}

{% block content %}
<div class="container-fluid p-0">
    <h1>Documents</h1>
    
    <!-- Filter Form -->
    <form method="get" class="form-inline mb-3">
        <div class="form-group mr-2">
            <label for="document_type" class="mr-2">Document Type:</label>
            <select id="document_type" name="document_type" class="form-control">
                <option value="">All</option>
                {% for type, name in Document.CATEGORY_CHOICES %}
                    <option value="{{ type }}" {% if selected_document_type == type %}selected{% endif %}>{{ name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group mr-2">
            <label for="category" class="mr-2">Category:</label>
            <select id="category" name="category" class="form-control">
                <option value="">All</option>
                {% for category in categories %}
                    <option value="{{ category.id }}" {% if selected_category_id|default:'' == category.id %}selected{% endif %}>{{ category.name }}</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Filter</button>
    </form>
    
    <!-- Document List -->
    <ul class="list-group">
        {% for document in documents %}
            <li class="list-group-item">
                {{ document.title }} ({{ document.get_document_type_display }}) - <a href="{{ document.file.url }}" target="_blank">Download</a>
                <p>{{ document.description }}</p>
                <small>Category: {{ document.category.name }}</small>
            </li>
        {% empty %}
            <li class="list-group-item">No documents found.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
